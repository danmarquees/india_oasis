{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Certifique-se de incluir o script de notifica√ß√µes -->
<script src="{% static 'js/toast-system.js' %}"></script>

<!-- CSRF Token para requisi√ß√µes AJAX -->
{% csrf_token %}

<!-- Configura√ß√£o de URLs do Django para o sistema de toast -->
<script>
    // Defini√ß√£o global das URLs do Django para uso no JavaScript
    var URLS = {
        cart: "{% url 'store:cart' %}",
        wishlist: "{% url 'store:wishlist' %}",
        products: "{% url 'store:product_list' %}",
        home: "{% url 'store:home' %}",
        product_detail: function (slug) {
            return "{% url 'store:product_detail' 'PLACEHOLDER_SLUG' %}".replace(
                "PLACEHOLDER_SLUG",
                slug,
            );
        },
    };
</script>

<!-- CSS do carrossel j√° est√° definido em styles.css -->

<main id="main-content" class="container mx-auto p-4 sm:p-6 lg:p-8">
    <!-- ==== P√ÅGINA INICIAL ==== -->
    <div id="home-page" class="page active-page">
        <!-- Carrossel Din√¢mico de Banners -->
        <section
            class="relative w-full h-80 md:h-[500px] lg:h-[600px] rounded-2xl overflow-hidden shadow-2xl mb-12"
        >
            <div id="carousel-container" class="relative w-full h-full">
                <!-- Debug: Total de banners: {{ banners|length }} -->
                {% for banner in banners %}
                <!-- Debug: Banner {{ forloop.counter }}: {{ banner.titulo }} (ativo: {{ banner.ativo }}, ordem: {{ banner.ordem }}) -->
                <div
                    class="carousel-item {% if forloop.first %}active{% endif %} absolute inset-0 flex items-center"
                    style="background-image: url('{{ banner.imagem.url }}'); background-size: cover; background-position: center; {% if banner.cor_fundo %}background-color: {{ banner.cor_fundo }};{% endif %}"
                    data-slide="{{ forloop.counter0 }}"
                    data-title="{{ banner.titulo }}"
                >
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-transparent"
                    ></div>
                    <div class="relative z-10 container mx-auto px-8">
                        <div class="max-w-2xl">
                            <h1
                                class="text-4xl md:text-6xl lg:text-7xl font-teko mb-6 leading-tight"
                                style="{% if banner.cor_texto %}color: {{ banner.cor_texto }};{% endif %}"
                            >
                                {{ banner.titulo }}
                            </h1>
                            {% if banner.subtitulo %}
                            <p
                                class="mb-8 text-lg md:text-xl text-gray-200 leading-relaxed"
                                style="{% if banner.cor_texto %}color: {{ banner.cor_texto }};{% endif %}"
                            >
                                {{ banner.subtitulo }}
                            </p>
                            {% endif %}
                            <!--prettier-ignore-start -->
                            {% if banner.texto_botao and banner.url_botao %}
                            <a
                                href="{{ banner.url_botao }}"
                                class="btn btn-primary text-lg px-8 py-4 mt-4 inline-block"
                                style="{% if banner.cor_fundo %}background-color: {{ banner.cor_fundo }};{% endif %}{% if banner.cor_texto %}color: {{ banner.cor_texto }};{% endif %}"
                            >
                                {{ banner.texto_botao }}
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- Carousel Controls e Indicators podem ser mantidos ou adaptados -->
            <!-- Carousel Controls -->
            <button
                id="prev-slide"
                class="absolute left-4 md:left-6 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white p-3 md:p-4 rounded-full transition-all duration-300 hover:scale-110 group border-2 border-black/30 shadow-lg"
            >
                <i
                    class="fas fa-chevron-left text-lg group-hover:text-yellow-400"
                ></i>
            </button>
            <button
                id="next-slide"
                class="absolute right-4 md:right-6 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white p-3 md:p-4 rounded-full transition-all duration-300 hover:scale-110 group border-2 border-black/30 shadow-lg"
            >
                <i
                    class="fas fa-chevron-right text-lg group-hover:text-yellow-400"
                ></i>
            </button>

            <!-- Carousel Indicators -->
            <div
                class="absolute bottom-4 md:bottom-6 left-1/2 -translate-x-1/2 flex space-x-3"
            >
                <!-- Debug: Indicadores para {{ banners|length }} banners -->
                {% for banner in banners %}
                <button
                    class="carousel-indicator {% if forloop.first %}active{% endif %} w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-300"
                    data-slide="{{ forloop.counter0 }}"
                    title="Banner {{ forloop.counter }}: {{ banner.titulo }}"
                ></button>
                {% endfor %}
            </div>

            <!-- Progress Bar -->
            <div class="absolute bottom-0 left-0 w-full h-1 bg-white/20">
                <div
                    id="carousel-progress"
                    class="h-full bg-gradient-to-r from-yellow-400 to-orange-400 transition-all duration-300 ease-linear"
                    style="width: 0%"
                ></div>
            </div>
        </section>

        <!-- Script de Diagn√≥stico do Carrossel -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                console.log("üîç === DIAGN√ìSTICO DO CARROSSEL ===");

                // Verificar elementos
                const items = document.querySelectorAll(".carousel-item");
                const indicators = document.querySelectorAll(
                    ".carousel-indicator",
                );
                const container = document.getElementById("carousel-container");
                const progress = document.getElementById("carousel-progress");
                const nextBtn = document.getElementById("next-slide");
                const prevBtn = document.getElementById("prev-slide");

                console.log("üìä Elementos encontrados:");
                console.log("- Slides:", items.length);
                console.log("- Indicadores:", indicators.length);
                console.log("- Container:", !!container);
                console.log("- Barra de progresso:", !!progress);
                console.log("- Bot√£o pr√≥ximo:", !!nextBtn);
                console.log("- Bot√£o anterior:", !!prevBtn);

                // Verificar slides individualmente
                items.forEach((item, index) => {
                    const isActive = item.classList.contains("active");
                    const title = item.getAttribute("data-title");
                    const slide = item.getAttribute("data-slide");
                    console.log(
                        `üìÑ Slide ${index}: "${title}" (ativo: ${isActive}, data-slide: ${slide})`,
                    );

                    // Verificar estilos computados
                    const styles = getComputedStyle(item);
                    console.log(`  - Opacity: ${styles.opacity}`);
                    console.log(`  - Z-index: ${styles.zIndex}`);
                    console.log(`  - Visibility: ${styles.visibility}`);
                });

                // Verificar indicadores
                indicators.forEach((indicator, index) => {
                    const isActive = indicator.classList.contains("active");
                    const slideIndex = indicator.getAttribute("data-slide");
                    console.log(
                        `üîò Indicador ${index}: ativo=${isActive}, data-slide=${slideIndex}`,
                    );
                });

                // Teste de funcionalidade
                if (nextBtn) {
                    console.log("üß™ Testando bot√£o pr√≥ximo...");
                    nextBtn.addEventListener("click", function () {
                        console.log("‚úÖ Bot√£o pr√≥ximo funcionando!");
                    });
                }

                if (prevBtn) {
                    console.log("üß™ Testando bot√£o anterior...");
                    prevBtn.addEventListener("click", function () {
                        console.log("‚úÖ Bot√£o anterior funcionando!");
                    });
                }

                console.log("üîç === FIM DO DIAGN√ìSTICO ===");
            });
        </script>

        <!-- Cat√°logo de Produtos Preview -->
        <section class="mb-16">
            <h2 class="text-4xl font-teko text-center text-secondary mb-8">
                <i class="fas fa-fire text-primary mr-3"></i>
                Nosso Cat√°logo
            </h2>
            <div
                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
            >
                {% for product in products %}
                <div
                    class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                >
                    <div class="aspect-square bg-gray-100 relative">
                        <img
                            src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default_product.png' %}{% endif %}"
                            alt="{{ product.name }}"
                            class="w-full h-full object-cover"
                            loading="lazy"
                        />
                        <button
                            class="absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-red-50"
                        >
                            <i
                                class="fas fa-heart text-gray-400 hover:text-red-500"
                            ></i>
                        </button>
                        {% if product.discount_price %}
                        <span
                            class="absolute top-3 left-3 bg-red-600 text-white text-xs px-2 py-1 rounded font-bold"
                        >
                            PROMO√á√ÉO -{{ product.discount_percent }}%
                        </span>
                        {% elif product.stock == 0 %}
                        <span
                            class="absolute top-3 left-3 bg-red-600 text-white text-xs px-2 py-1 rounded font-bold"
                            >ESGOTADO</span
                        >
                        {% elif product.is_new %} {# Assuming you have an
                        'is_new' attribute or logic for this #}
                        <span
                            class="absolute top-3 left-3 bg-green-500 text-white text-xs px-2 py-1 rounded"
                            >NOVO</span
                        >
                        {% endif %}
                    </div>
                    <div class="p-4">
                        <a
                            href="{% url 'store:product_detail' product.slug %}"
                            class="block"
                        >
                            <h3
                                class="font-semibold text-gray-800 mb-2 hover:text-primary transition-colors"
                            >
                                {{ product.name }}
                            </h3>
                        </a>
                        <p class="text-sm text-gray-600 mb-3">
                            {{ product.description|truncatechars:50 }}
                        </p>
                        <div class="flex items-center mb-2">
                            <div class="flex text-yellow-400 text-sm">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="text-xs text-gray-500 ml-1">(0)</span>
                            {# Adjust to show actual review count #}
                        </div>
                        <div class="flex items-center justify-between">
                            {% if product.discount_price %}
                            <span
                                class="text-lg font-bold text-gray-400 line-through"
                                >R$ {{ product.price|floatformat:2 }}</span
                            >
                            <span class="text-xl font-bold text-primary ml-2"
                                >R$ {{ product.discount_price|floatformat:2
                                }}</span
                            >
                            {% else %}
                            <span class="text-lg font-bold text-primary"
                                >R$ {{ product.price|floatformat:2 }}</span
                            >
                            {% endif %}
                            <button
                                class="btn btn-primary text-sm px-4 py-2 add-to-cart-btn"
                                data-id="{{ product.id }}"
                                data-product-name="{{ product.name }}"
                            >
                                <i class="fas fa-cart-plus mr-1"></i>
                                Adicionar
                            </button>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-span-full text-center py-12">
                    <i class="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-2xl font-teko text-gray-500 mb-2">
                        Nenhum produto dispon√≠vel no momento.
                    </h3>
                    <p class="text-gray-400">
                        Volte mais tarde para novas op√ß√µes!
                    </p>
                </div>
                {% endfor %}
            </div>
            <div class="text-center">
                <a
                    href="{% url 'store:product_list' %}"
                    class="btn btn-secondary text-lg px-8 py-3"
                >
                    <i class="fas fa-th-large mr-2"></i>
                    Ver Todos os Produtos
                </a>
            </div>
        </section>

        <section class="mb-16">
            <h2 class="text-4xl font-teko text-center text-secondary mb-8">
                <i class="fas fa-crown text-primary mr-3"></i>
                Produtos em Destaque
            </h2>
            <div
                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
            >
                {% for product in products %}
                <div
                    class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                >
                    <div class="aspect-square bg-gray-100 relative">
                        <img
                            src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default_product.png' %}{% endif %}"
                            alt="{{ product.name }}"
                            class="w-full h-full object-cover"
                            loading="lazy"
                        />
                        <button
                            class="absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-red-50"
                        >
                            <i
                                class="fas fa-heart text-gray-400 hover:text-red-500"
                            ></i>
                        </button>
                        {% comment %} You can add logic for tags like 'BEST
                        SELLER', 'OFFER', 'NEW' here, based on product data
                        {%endcomment %} {% if product.stock == 0 %}
                        <span
                            class="absolute top-3 left-3 bg-red-600 text-white text-xs px-2 py-1 rounded font-bold"
                            >ESGOTADO</span
                        >
                        {% elif product.is_new %} {# Assuming you have an
                        'is_new' attribute or logic for this #}
                        <span
                            class="absolute top-3 left-3 bg-green-500 text-white text-xs px-2 py-1 rounded"
                            >NOVO</span
                        >
                        {% endif %}
                    </div>
                    <div class="p-4">
                        <a
                            href="{% url 'store:product_detail' product.slug %}"
                            class="block"
                        >
                            <h3
                                class="font-semibold text-gray-800 mb-2 hover:text-primary transition-colors"
                            >
                                {{ product.name }}
                            </h3>
                        </a>
                        <p class="text-sm text-gray-600 mb-3">
                            {{ product.description|truncatechars:50 }}
                        </p>
                        <div class="flex items-center mb-2">
                            <div class="flex text-yellow-400 text-sm">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="text-xs text-gray-500 ml-1">(0)</span>
                            {# Adjust to show actual review count #}
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-lg font-bold text-primary"
                                >R$ {{ product.price|floatformat:2 }}</span
                            >
                            <button
                                class="btn btn-primary text-sm px-4 py-2 add-to-cart-btn"
                                data-id="{{ product.id }}"
                                data-product-name="{{ product.name }}"
                            >
                                <i class="fas fa-cart-plus mr-1"></i>
                                Adicionar
                            </button>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-span-full text-center py-12">
                    <i class="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-2xl font-teko text-gray-500 mb-2">
                        Nenhum produto dispon√≠vel no momento.
                    </h3>
                    <p class="text-gray-400">
                        Volte mais tarde para novas op√ß√µes!
                    </p>
                </div>
                {% endfor %}
            </div>
            <div class="text-center">
                <a
                    href="{% url 'store:product_list' %}"
                    class="btn btn-secondary text-lg px-8 py-3"
                >
                    <i class="fas fa-th-large mr-2"></i>
                    Ver Todos os Produtos
                </a>
            </div>
        </section>

        <!-- Recomenda√ß√µes -->
        <section class="mb-16">
            <h2 class="text-4xl font-teko text-center text-secondary mb-8">
                <i class="fas fa-magic text-primary mr-3"></i>
                Recomenda√ß√µes para Voc√™
            </h2>
            <div
                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
            >
                {% for product in products %}
                <div
                    class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"
                >
                    <div class="aspect-square bg-gray-100 relative">
                        <img
                            src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/default_product.png' %}{% endif %}"
                            alt="{{ product.name }}"
                            class="w-full h-full object-cover"
                            loading="lazy"
                        />
                        <button
                            class="absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-red-50"
                        >
                            <i
                                class="fas fa-heart text-gray-400 hover:text-red-500"
                            ></i>
                        </button>
                        {% comment %} You can add logic for tags like 'BEST
                        SELLER', 'OFFER', 'NEW' here, based on product data
                        {%endcomment %} {% if product.stock == 0 %}
                        <span
                            class="absolute top-3 left-3 bg-red-600 text-white text-xs px-2 py-1 rounded font-bold"
                            >ESGOTADO</span
                        >
                        {% elif product.is_new %} {# Assuming you have an
                        'is_new' attribute or logic for this #}
                        <span
                            class="absolute top-3 left-3 bg-green-500 text-white text-xs px-2 py-1 rounded"
                            >NOVO</span
                        >
                        {% endif %}
                    </div>
                    <div class="p-4">
                        <a
                            href="{% url 'store:product_detail' product.slug %}"
                            class="block"
                        >
                            <h3
                                class="font-semibold text-gray-800 mb-2 hover:text-primary transition-colors"
                            >
                                {{ product.name }}
                            </h3>
                        </a>
                        <p class="text-sm text-gray-600 mb-3">
                            {{ product.description|truncatechars:50 }}
                        </p>
                        <div class="flex items-center mb-2">
                            <div class="flex text-yellow-400 text-sm">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="text-xs text-gray-500 ml-1">(0)</span>
                            {# Adjust to show actual review count #}
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-lg font-bold text-primary"
                                >R$ {{ product.price|floatformat:2 }}</span
                            >
                            <button
                                class="btn btn-primary text-sm px-4 py-2 add-to-cart-btn"
                                data-id="{{ product.id }}"
                                data-product-name="{{ product.name }}"
                            >
                                <i class="fas fa-cart-plus mr-1"></i>
                                Adicionar
                            </button>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-span-full text-center py-12">
                    <i class="fas fa-box-open text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-2xl font-teko text-gray-500 mb-2">
                        Nenhum produto dispon√≠vel no momento.
                    </h3>
                    <p class="text-gray-400">
                        Volte mais tarde para novas op√ß√µes!
                    </p>
                </div>
                {% endfor %}
            </div>
            <div class="text-center">
                <a
                    href="{% url 'store:product_list' %}"
                    class="btn btn-secondary text-lg px-8 py-3"
                >
                    <i class="fas fa-th-large mr-2"></i>
                    Ver Todos os Produtos
                </a>
            </div>
        </section>

        <!-- Avalia√ß√µes em Destaque -->
        <section class="mt-12 bg-white p-8 rounded-lg shadow-md">
            <h2 class="text-4xl font-teko text-center text-secondary mb-8">
                O que nossos clientes dizem
            </h2>
            <div
                id="featured-reviews"
                class="grid grid-cols-1 md:grid-cols-3 gap-8"
            >
                <!-- Avalia√ß√£o 1 - Garam Masala -->
                <div
                    class="indian-card review-card p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300"
                >
                    <div class="flex items-center mb-4">
                        <img
                            src="https://placehold.co/60x60/D84315/FFFFFF?text=CM"
                            alt="Carla Mendes"
                            class="w-12 h-12 rounded-full mr-4 review-avatar"
                        />
                        <div>
                            <h4
                                class="font-rajdhani font-semibold text-lg text-cinnamon-brown"
                            >
                                Carla Mendes
                            </h4>
                            <div class="rating flex">
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-badge mb-3">
                        Garam Masala Premium
                    </div>
                    <p class="text-gray-700 italic leading-relaxed">
                        "Simplesmente incr√≠vel! O aroma √© t√£o aut√™ntico que me
                        transporta diretamente para a √çndia. Meu curry de frango
                        nunca ficou t√£o saboroso. Produto de alt√≠ssima
                        qualidade!"
                    </p>
                    <div class="mt-4 text-sm text-gray-500">
                        <i class="fas fa-calendar mr-1"></i>
                        Comprou h√° 2 semanas
                    </div>
                </div>

                <!-- Avalia√ß√£o 2 - C√∫rcuma -->
                <div
                    class="indian-card review-card p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300"
                >
                    <div class="flex items-center mb-4">
                        <img
                            src="https://placehold.co/60x60/F7931E/FFFFFF?text=RS"
                            alt="Ricardo Santos"
                            class="w-12 h-12 rounded-full mr-4 review-avatar"
                        />
                        <div>
                            <h4
                                class="font-rajdhani font-semibold text-lg text-cinnamon-brown"
                            >
                                Ricardo Santos
                            </h4>
                            <div class="rating flex">
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-badge mb-3">C√∫rcuma Pura</div>
                    <p class="text-gray-700 italic leading-relaxed">
                        "A cor dourada √© impressionante! Uso tanto na culin√°ria
                        quanto no golden milk matinal. Sinto os benef√≠cios
                        anti-inflamat√≥rios. Melhor c√∫rcuma que j√° comprei!"
                    </p>
                    <div class="mt-4 text-sm text-gray-500">
                        <i class="fas fa-calendar mr-1"></i>
                        Cliente h√° 3 meses
                    </div>
                </div>

                <!-- Avalia√ß√£o 3 - Chai Masala -->
                <div
                    class="indian-card review-card p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300"
                >
                    <div class="flex items-center mb-4">
                        <img
                            src="https://placehold.co/60x60/4A6741/FFFFFF?text=AL"
                            alt="Ana Lucia"
                            class="w-12 h-12 rounded-full mr-4 review-avatar"
                        />
                        <div>
                            <h4
                                class="font-rajdhani font-semibold text-lg text-cinnamon-brown"
                            >
                                Ana L√∫cia
                            </h4>
                            <div class="rating flex">
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-badge mb-3">Ch√° Masala Chai</div>
                    <p class="text-gray-700 italic leading-relaxed">
                        "Este chai √© puro amor em uma x√≠cara! A mistura de
                        especiarias √© perfeita - nem muito forte, nem muito
                        suave. J√° virou ritual na minha casa. Recomendo demais!"
                    </p>
                    <div class="mt-4 text-sm text-gray-500">
                        <i class="fas fa-calendar mr-1"></i>
                        Comprou ontem
                    </div>
                </div>

                <!-- Avalia√ß√£o 4 - Cardamomo -->
                <div
                    class="indian-card review-card p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300"
                >
                    <div class="flex items-center mb-4">
                        <img
                            src="https://placehold.co/60x60/8B4513/FFFFFF?text=MF"
                            alt="Marcos Ferreira"
                            class="w-12 h-12 rounded-full mr-4 review-avatar"
                        />
                        <div>
                            <h4
                                class="font-rajdhani font-semibold text-lg text-cinnamon-brown"
                            >
                                Marcos Ferreira
                            </h4>
                            <div class="rating flex">
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-badge mb-3">Cardamomo Verde</div>
                    <p class="text-gray-700 italic leading-relaxed">
                        "Cardamomo fresco e arom√°tico! Uso para fazer caf√© √°rabe
                        e doces indianos. A qualidade √© excepcional, as vagens
                        chegaram verdinhas e perfumadas. Excelente!"
                    </p>
                    <div class="mt-4 text-sm text-gray-500">
                        <i class="fas fa-calendar mr-1"></i>
                        Cliente fiel h√° 1 ano
                    </div>
                </div>

                <!-- Avalia√ß√£o 5 - Lentilhas -->
                <div
                    class="indian-card review-card p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300"
                >
                    <div class="flex items-center mb-4">
                        <img
                            src="https://placehold.co/60x60/CC2936/FFFFFF?text=JS"
                            alt="Julia Silva"
                            class="w-12 h-12 rounded-full mr-4 review-avatar"
                        />
                        <div>
                            <h4
                                class="font-rajdhani font-semibold text-lg text-cinnamon-brown"
                            >
                                J√∫lia Silva
                            </h4>
                            <div class="rating flex">
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-badge mb-3">Lentilha Vermelha</div>
                    <p class="text-gray-700 italic leading-relaxed">
                        "Perfeitas para o dal! Cozinham rapidinho e ficam
                        cremosas. Minha fam√≠lia toda se apaixonou pelos pratos
                        indianos que fa√ßo com essas lentilhas. Prote√≠na de
                        qualidade!"
                    </p>
                    <div class="mt-4 text-sm text-gray-500">
                        <i class="fas fa-calendar mr-1"></i>
                        3¬™ compra este m√™s
                    </div>
                </div>

                <!-- Avalia√ß√£o 6 - Pimenta -->
                <div
                    class="indian-card review-card p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300"
                >
                    <div class="flex items-center mb-4">
                        <img
                            src="https://placehold.co/60x60/2F1B14/FFFFFF?text=PA"
                            alt="Pedro Almeida"
                            class="w-12 h-12 rounded-full mr-4 review-avatar"
                        />
                        <div>
                            <h4
                                class="font-rajdhani font-semibold text-lg text-cinnamon-brown"
                            >
                                Pedro Almeida
                            </h4>
                            <div class="rating flex">
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                                <i class="fas fa-star text-accent"></i>
                            </div>
                        </div>
                    </div>
                    <div class="ingredient-badge mb-3">Pimenta Caiena</div>
                    <p class="text-gray-700 italic leading-relaxed">
                        "Para quem gosta de comida bem temperada, essa pimenta √©
                        sensacional! Ard√™ncia na medida certa e um sabor
                        incr√≠vel. Meus convidados sempre perguntam o segredo dos
                        meus pratos!"
                    </p>
                    <div class="mt-4 text-sm text-gray-500">
                        <i class="fas fa-calendar mr-1"></i>
                        Recompra garantida!
                    </div>
                </div>
            </div>
        </section>

        <!-- Estat√≠sticas de Satisfa√ß√£o -->
        <section
            class="mt-16 mb-12 rounded-lg p-8 text-white relative overflow-hidden shadow-2xl"
            style="
                background: linear-gradient(
                    135deg,
                    #8b4513 0%,
                    #a0522d 25%,
                    #cd853f 50%,
                    #d2691e 75%,
                    #cc2936 100%
                );
            "
        >
            <!-- Background Pattern -->
            <div class="absolute inset-0 opacity-10">
                <div class="paisley-decoration h-full w-full"></div>
            </div>
            <!-- Spice-themed Background Overlay -->
            <div
                class="absolute inset-0 bg-gradient-to-t from-amber-900/30 via-transparent to-orange-800/20"
            ></div>
            <!-- Indian Pattern Overlay -->
            <div
                class="absolute inset-0 opacity-5"
                style="
                    background-image:
                        radial-gradient(
                            circle at 25% 25%,
                            #f7931e 2px,
                            transparent 2px
                        ),
                        radial-gradient(
                            circle at 75% 75%,
                            #ff6b35 1px,
                            transparent 1px
                        );
                    background-size: 20px 20px;
                    background-position:
                        0 0,
                        10px 10px;
                "
            ></div>

            <div class="relative z-10">
                <div class="text-center mb-8">
                    <h2 class="text-4xl font-teko mb-4 text-yellow-200">
                        <i class="fas fa-chart-line mr-3 text-yellow-300"></i>
                        Nossa Satisfa√ß√£o em N√∫meros
                    </h2>
                    <p class="text-xl text-orange-100">
                        A opini√£o dos nossos clientes √© o que mais importa para
                        n√≥s
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
                    <div
                        class="spice-container bg-amber-800/30 p-6 rounded-lg backdrop-blur-sm border border-yellow-400/30 hover:border-yellow-300/50 transition-all duration-300 hover:scale-105"
                    >
                        <div class="text-4xl font-bold text-yellow-300 mb-2">
                            98%
                        </div>
                        <div class="text-lg font-rajdhani text-white">
                            Satisfa√ß√£o Geral
                        </div>
                        <div class="text-sm text-orange-200 mt-2">
                            <i class="fas fa-star text-yellow-400"></i>
                            Baseado em 2.847 avalia√ß√µes
                        </div>
                    </div>

                    <div
                        class="spice-container bg-amber-800/30 p-6 rounded-lg backdrop-blur-sm border border-yellow-400/30 hover:border-yellow-300/50 transition-all duration-300 hover:scale-105"
                    >
                        <div class="text-4xl font-bold text-yellow-300 mb-2">
                            4.9
                        </div>
                        <div class="text-lg font-rajdhani text-white">
                            Nota M√©dia
                        </div>
                        <div class="text-sm text-orange-200 mt-2">
                            <i class="fas fa-thumbs-up text-yellow-400"></i>
                            Avalia√ß√£o de 5 estrelas
                        </div>
                    </div>

                    <div
                        class="spice-container bg-amber-800/30 p-6 rounded-lg backdrop-blur-sm border border-yellow-400/30 hover:border-yellow-300/50 transition-all duration-300 hover:scale-105"
                    >
                        <div class="text-4xl font-bold text-yellow-300 mb-2">
                            95%
                        </div>
                        <div class="text-lg font-rajdhani text-white">
                            Recompram
                        </div>
                        <div class="text-sm text-orange-200 mt-2">
                            <i class="fas fa-redo text-yellow-400"></i>
                            Clientes que voltam
                        </div>
                    </div>

                    <div
                        class="spice-container bg-amber-800/30 p-6 rounded-lg backdrop-blur-sm border border-yellow-400/30 hover:border-yellow-300/50 transition-all duration-300 hover:scale-105"
                    >
                        <div class="text-4xl font-bold text-yellow-300 mb-2">
                            24h
                        </div>
                        <div class="text-lg font-rajdhani text-white">
                            Suporte R√°pido
                        </div>
                        <div class="text-sm text-orange-200 mt-2">
                            <i class="fas fa-clock text-yellow-400"></i>
                            Tempo m√©dio de resposta
                        </div>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button
                        class="btn bg-yellow-500 text-black hover:bg-yellow-400 px-8 py-3 text-lg font-rajdhani shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105"
                    >
                        <i class="fas fa-comment-dots mr-2"></i>
                        Ver Todas as Avalia√ß√µes
                    </button>
                </div>
            </div>
        </section>

        <!-- Depoimentos R√°pidos -->
        <section class="mb-16 bg-white rounded-lg shadow-lg p-8">
            <h2 class="text-3xl font-teko text-center text-secondary mb-8">
                <i class="fas fa-quote-left mr-3 text-accent"></i>
                Palavras dos Nossos Clientes
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div
                    class="bg-gradient-to-br from-ginger-cream to-white p-4 rounded-lg border-l-4 border-saffron-deep"
                >
                    <p class="text-gray-700 italic mb-3">
                        "Produtos aut√™nticos que transformaram minha cozinha!"
                    </p>
                    <div class="flex items-center">
                        <div class="rating mr-3">
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                        </div>
                        <span class="text-sm font-semibold text-cinnamon-brown"
                            >- Marina C.</span
                        >
                    </div>
                </div>

                <div
                    class="bg-gradient-to-br from-ginger-cream to-white p-4 rounded-lg border-l-4 border-cardamom-green"
                >
                    <p class="text-gray-700 italic mb-3">
                        "Entrega super r√°pida e produtos fresqu√≠ssimos!"
                    </p>
                    <div class="flex items-center">
                        <div class="rating mr-3">
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                        </div>
                        <span class="text-sm font-semibold text-cinnamon-brown"
                            >- Roberto L.</span
                        >
                    </div>
                </div>

                <div
                    class="bg-gradient-to-br from-ginger-cream to-white p-4 rounded-lg border-l-4 border-turmeric-gold"
                >
                    <p class="text-gray-700 italic mb-3">
                        "Atendimento excepcional e pre√ßos justos!"
                    </p>
                    <div class="flex items-center">
                        <div class="rating mr-3">
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                            <i class="fas fa-star text-accent text-sm"></i>
                        </div>
                        <span class="text-sm font-semibold text-cinnamon-brown"
                            >- Fernanda S.</span
                        >
                    </div>
                </div>
            </div>
        </section>

        <!-- Blocos de Informa√ß√£o -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
            <div
                class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4"
            >
                <i class="fas fa-truck-fast text-4xl text-primary"></i>
                <div>
                    <h3 class="text-2xl font-teko text-secondary">
                        Entrega em todo o Brasil
                    </h3>
                    <p>
                        Receba seus produtos favoritos no conforto da sua casa,
                        onde quer que voc√™ esteja.
                    </p>
                </div>
            </div>
            <div
                class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4"
            >
                <i class="fas fa-credit-card text-4xl text-primary"></i>
                <div>
                    <h3 class="text-2xl font-teko text-secondary">
                        Pagamento Facilitado
                    </h3>
                    <p>
                        Aceitamos cart√£o de cr√©dito, PIX e boleto. Compre com
                        seguran√ßa e praticidade.
                    </p>
                </div>
            </div>
        </section>
    </div>
</main>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Atualizar os bot√µes "Adicionar ao carrinho" para usar o novo sistema
        const addToCartButtons = document.querySelectorAll(".add-to-cart-btn");
        addToCartButtons.forEach((button) => {
            button.addEventListener("click", function (e) {
                e.preventDefault();
                const productId = this.getAttribute("data-id");
                const productName = this.getAttribute("data-product-name");

                // Usar o sistema de notifica√ß√µes global
                if (window.cartNotifications) {
                    window.cartNotifications.itemAdded(productName, 1);
                }

                // Adicionar ao carrinho usando AJAX e a URL definida pelo Django
                const csrfToken = document.querySelector(
                    'input[name="csrfmiddlewaretoken"]',
                )?.value;

                if (csrfToken && productId) {
                    const formData = new FormData();
                    formData.append("quantity", 1);
                    formData.append("csrfmiddlewaretoken", csrfToken);

                    // URL do Django para adicionar ao carrinho
                    const addToCartUrl =
                        `{% url 'store:cart_add' 999 %}`.replace(
                            "999",
                            productId,
                        );

                    fetch(addToCartUrl, {
                        method: "POST",
                        body: formData,
                        credentials: "same-origin",
                    }).catch((error) => {
                        console.error("Erro ao adicionar ao carrinho:", error);
                        if (window.toastSystem) {
                            window.toastSystem.error(
                                "Erro",
                                "N√£o foi poss√≠vel adicionar o item ao carrinho",
                            );
                        }
                    });
                }
            });
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // For√ßa o carrossel a recontar os slides ap√≥s o DOM estar pronto
        if (typeof updateCarousel === "function") {
            updateCarousel();
            if (typeof startCarouselAutoplay === "function") {
                startCarouselAutoplay();
            }
            if (typeof setupCarouselListeners === "function") {
                setupCarouselListeners();
            }
        }
    });
</script>
{% endblock content %}
