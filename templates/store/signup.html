{% extends 'base.html' %} {% load static %} {% block content %}

<title>
    {% block title %}Cadastro - India Oasis - Temperos e Sabores da Índia
    {%endblock %}
</title>
<style>
    /* Estilos específicos para o formulário de cadastro */
    .form-step {
        display: none;
    }

    .form-step.active {
        display: block;
        animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .step-indicator {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        transition: all 0.3s ease;
        border: 2px solid #e5e7eb;
        position: relative;
    }

    .step-indicator.active {
        background-color: #ff6b35;
        color: white;
        border-color: #ff6b35;
        box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.2);
    }

    .step-indicator.completed {
        background-color: #10b981;
        color: white;
        border-color: #10b981;
    }

    .step-indicator:not(.active):not(.completed) {
        background-color: #f9fafb;
        color: #6b7280;
    }

    .step-line {
        height: 2px;
        background-color: #e5e7eb;
        transition: all 0.3s ease;
        position: relative;
    }

    .step-line.completed {
        background-color: #10b981;
    }

    .form-field-error {
        border-color: #ef4444 !important;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
    }

    .password-strength-bar {
        height: 4px;
        border-radius: 2px;
        transition: all 0.3s ease;
        background-color: #e5e7eb;
        margin-top: 8px;
    }

    .password-strength-weak {
        background-color: #ef4444;
        width: 33%;
    }

    .password-strength-medium {
        background-color: #f59e0b;
        width: 66%;
    }

    .password-strength-strong {
        background-color: #10b981;
        width: 100%;
    }

    .loading-spinner {
        border: 2px solid #f3f3f3;
        border-top: 2px solid #ff6b35;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    .success-message {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        display: none;
    }

    .error-message {
        color: #ef4444;
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: none;
    }

    .error-message.show {
        display: block;
    }
</style>

<!-- ==== CONTEÚDO PRINCIPAL ==== -->
<main class="container mx-auto p-4 sm:p-6 lg:p-8">
    <!-- Breadcrumb -->
    <nav class="mb-6">
        <ol class="flex space-x-2 text-sm">
            <li>
                <a href="index.html" class="text-primary hover:underline"
                    >Início</a
                >
            </li>
            <li class="text-gray-500">/</li>
            <li class="text-gray-700">Cadastro</li>
        </ol>
    </nav>

    <!-- Título da Página -->
    <div class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-teko text-secondary mb-4">
            <i class="fas fa-user-plus text-primary mr-3"></i>
            Criar Sua Conta
        </h1>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
            Junte-se à família India Oasis e descubra os autênticos sabores da
            Índia. Crie sua conta para uma experiência personalizada de compras.
        </p>
    </div>

    <!-- Indicador de Progresso -->
    <div class="max-w-4xl mx-auto mb-8">
        <div class="flex items-center justify-center">
            <div class="flex items-center space-x-2">
                <div class="step-indicator active" data-step="1">1</div>
                <span class="text-sm font-medium hidden sm:block"
                    >Dados Pessoais</span
                >
            </div>
            <div class="step-line w-16 mx-4"></div>
            <div class="flex items-center space-x-2">
                <div class="step-indicator" data-step="2">2</div>
                <span class="text-sm font-medium hidden sm:block"
                    >Endereço</span
                >
            </div>
            <div class="step-line w-16 mx-4"></div>
            <div class="flex items-center space-x-2">
                <div class="step-indicator" data-step="3">3</div>
                <span class="text-sm font-medium hidden sm:block"
                    >Confirmação</span
                >
            </div>
        </div>
    </div>

    <!-- Formulário de Cadastro -->
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6 md:p-8">
        <form
            method="pos"
            action="{% url 'store:signup' %}"
            id="cadastro-form"
            class="space-y-6"
        >
            {% csrf_token %}
            <!-- ETAPA 1: Dados Pessoais -->
            <div class="form-step active" id="step-1">
                <h2
                    class="text-2xl font-teko text-secondary mb-6 flex items-center"
                >
                    <i class="fas fa-user text-primary mr-3"></i>
                    Dados Pessoais
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label
                            for="nome"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Nome Completo *
                        </label>
                        <input
                            type="text"
                            id="nome"
                            name="nome"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="Seu nome completo"
                        />
                        <div class="error-message" id="error-nome"></div>
                    </div>

                    <div>
                        <label
                            for="cpf"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            CPF *
                        </label>
                        <input
                            type="text"
                            id="cpf"
                            name="cpf"
                            required
                            maxlength="14"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="000.000.000-00"
                        />
                        <div class="error-message" id="error-cpf"></div>
                    </div>

                    <div>
                        <label
                            for="email"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            E-mail *
                        </label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="seu@email.com"
                        />
                        <div class="error-message" id="error-email"></div>
                    </div>

                    <div>
                        <label
                            for="telefone"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Telefone *
                        </label>
                        <input
                            type="tel"
                            id="telefone"
                            name="telefone"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="(11) 99999-9999"
                        />
                        <div class="error-message" id="error-telefone"></div>
                    </div>

                    <div>
                        <label
                            for="data-nascimento"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Data de Nascimento *
                        </label>
                        <input
                            type="date"
                            id="data-nascimento"
                            name="data_nascimento"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                        />
                        <div
                            class="error-message"
                            id="error-data-nascimento"
                        ></div>
                    </div>

                    <div>
                        <label
                            for="genero"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Gênero
                        </label>
                        <select
                            id="genero"
                            name="genero"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                        >
                            <option value="">Selecione...</option>
                            <option value="masculino">Masculino</option>
                            <option value="feminino">Feminino</option>
                            <option value="nao-informar">
                                Prefiro não informar
                            </option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div>
                        <label
                            for="senha"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Senha *
                        </label>
                        <div class="relative">
                            <input
                                type="password"
                                id="senha"
                                name="password1"
                                required
                                minlength="8"
                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                placeholder="Mínimo 8 caracteres"
                            />
                            <button
                                type="button"
                                id="toggle-senha"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            >
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength-bar"></div>
                        <span
                            id="password-strength-text"
                            class="text-xs text-gray-500 mt-1 block"
                            >Digite uma senha segura</span
                        >
                        <div class="error-message" id="error-senha"></div>
                    </div>

                    <div>
                        <label
                            for="confirmar-senha"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Confirmar Senha *
                        </label>
                        <div class="relative">
                            <input
                                type="password"
                                id="confirmar-senha"
                                name="password2"
                                required
                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                placeholder="Confirme sua senha"
                            />
                            <button
                                type="button"
                                id="toggle-confirmar-senha"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            >
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div
                            class="error-message"
                            id="error-confirmar-senha"
                        ></div>
                    </div>
                </div>

                <div class="flex justify-end mt-8">
                    <button
                        type="button"
                        id="next-step-1"
                        class="btn btn-primary px-8 py-3 text-lg"
                    >
                        Próximo
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- ETAPA 2: Endereço -->
            <div class="form-step" id="step-2">
                <h2
                    class="text-2xl font-teko text-secondary mb-6 flex items-center"
                >
                    <i class="fas fa-map-marker-alt text-primary mr-3"></i>
                    Endereço de Entrega
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-2">
                        <label
                            for="cep"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            CEP *
                        </label>
                        <div class="flex space-x-2">
                            <input
                                type="text"
                                id="cep"
                                name="cep"
                                required
                                maxlength="9"
                                class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                placeholder="00000-000"
                            />
                            <button
                                type="button"
                                id="buscar-cep"
                                class="btn btn-secondary px-4 py-3 flex items-center"
                            >
                                <i
                                    class="fas fa-search"
                                    id="buscar-cep-icon"
                                ></i>
                                <div
                                    class="loading-spinner hidden"
                                    id="buscar-cep-loading"
                                ></div>
                            </button>
                        </div>
                        <div class="error-message" id="error-cep"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div>
                        <label
                            for="endereco"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Endereço *
                        </label>
                        <input
                            type="text"
                            id="endereco"
                            name="endereco"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="Rua, Avenida..."
                        />
                        <div class="error-message" id="error-endereco"></div>
                    </div>

                    <div>
                        <label
                            for="numero"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Número *
                        </label>
                        <input
                            type="text"
                            id="numero"
                            name="numero"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="123"
                        />
                        <div class="error-message" id="error-numero"></div>
                    </div>

                    <div>
                        <label
                            for="complemento"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Complemento
                        </label>
                        <input
                            type="text"
                            id="complemento"
                            name="complemento"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="Apartamento, bloco..."
                        />
                    </div>

                    <div>
                        <label
                            for="bairro"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Bairro *
                        </label>
                        <input
                            type="text"
                            id="bairro"
                            name="bairro"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="Seu bairro"
                        />
                        <div class="error-message" id="error-bairro"></div>
                    </div>

                    <div>
                        <label
                            for="cidade"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Cidade *
                        </label>
                        <input
                            type="text"
                            id="cidade"
                            name="cidade"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                            placeholder="Sua cidade"
                        />
                        <div class="error-message" id="error-cidade"></div>
                    </div>

                    <div>
                        <label
                            for="estado"
                            class="block text-sm font-medium text-gray-700 mb-2"
                        >
                            Estado *
                        </label>
                        <select
                            id="estado"
                            name="estado"
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                        >
                            <option value="">Selecione...</option>
                            <option value="AC">Acre</option>
                            <option value="AL">Alagoas</option>
                            <option value="AP">Amapá</option>
                            <option value="AM">Amazonas</option>
                            <option value="BA">Bahia</option>
                            <option value="CE">Ceará</option>
                            <option value="DF">Distrito Federal</option>
                            <option value="ES">Espírito Santo</option>
                            <option value="GO">Goiás</option>
                            <option value="MA">Maranhão</option>
                            <option value="MT">Mato Grosso</option>
                            <option value="MS">Mato Grosso do Sul</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="PA">Pará</option>
                            <option value="PB">Paraíba</option>
                            <option value="PR">Paraná</option>
                            <option value="PE">Pernambuco</option>
                            <option value="PI">Piauí</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="RN">Rio Grande do Norte</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="RO">Rondônia</option>
                            <option value="RR">Roraima</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SP">São Paulo</option>
                            <option value="SE">Sergipe</option>
                            <option value="TO">Tocantins</option>
                        </select>
                        <div class="error-message" id="error-estado"></div>
                    </div>
                </div>

                <div class="flex justify-between mt-8">
                    <button
                        type="button"
                        id="prev-step-2"
                        class="btn btn-secondary px-8 py-3 text-lg"
                    >
                        <i class="fas fa-arrow-left mr-2"></i>
                        Anterior
                    </button>
                    <button
                        type="button"
                        id="next-step-2"
                        class="btn btn-primary px-8 py-3 text-lg"
                    >
                        Próximo
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- ETAPA 3: Confirmação -->
            <div class="form-step" id="step-3">
                <h2
                    class="text-2xl font-teko text-secondary mb-6 flex items-center"
                >
                    <i class="fas fa-check-circle text-primary mr-3"></i>
                    Confirmação de Dados
                </h2>

                <div class="bg-gray-50 rounded-lg p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="font-semibold text-gray-700 mb-3">
                                <i class="fas fa-user text-primary mr-2"></i>
                                Dados Pessoais
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div>
                                    <span class="font-medium">Nome:</span>
                                    <span
                                        id="confirm-nome"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">CPF:</span>
                                    <span
                                        id="confirm-cpf"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">E-mail:</span>
                                    <span
                                        id="confirm-email"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">Telefone:</span>
                                    <span
                                        id="confirm-telefone"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium"
                                        >Data de Nasc.:</span
                                    >
                                    <span
                                        id="confirm-data-nascimento"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">Gênero:</span>
                                    <span
                                        id="confirm-genero"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-700 mb-3">
                                <i
                                    class="fas fa-map-marker-alt text-primary mr-2"
                                ></i>
                                Endereço
                            </h3>
                            <div class="space-y-2 text-sm">
                                <div>
                                    <span class="font-medium">CEP:</span>
                                    <span
                                        id="confirm-cep"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">Endereço:</span>
                                    <span
                                        id="confirm-endereco-completo"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">Bairro:</span>
                                    <span
                                        id="confirm-bairro"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                                <div>
                                    <span class="font-medium">Cidade/UF:</span>
                                    <span
                                        id="confirm-cidade-estado"
                                        class="text-gray-700"
                                    ></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Termos e Condições -->
                <div class="mb-6">
                    <div class="flex items-start space-x-3">
                        <input
                            type="checkbox"
                            id="aceitar-termos"
                            name="aceitarTermos"
                            required
                            class="mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"
                        />
                        <label
                            for="aceitar-termos"
                            class="text-sm text-gray-700"
                        >
                            Eu li e aceito os
                            <a href="#" class="text-primary hover:underline"
                                >Termos de Uso</a
                            >
                            e a
                            <a href="#" class="text-primary hover:underline"
                                >Política de Privacidade</a
                            >
                            da India Oasis.
                        </label>
                    </div>
                    <div class="error-message" id="error-termos"></div>
                </div>

                <!-- Newsletter -->
                <div class="mb-6">
                    <div class="flex items-start space-x-3">
                        <input
                            type="checkbox"
                            id="aceitar-newsletter"
                            name="aceitarNewsletter"
                            class="mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2"
                        />
                        <label
                            for="aceitar-newsletter"
                            class="text-sm text-gray-700"
                        >
                            Desejo receber ofertas especiais e novidades da
                            India Oasis por e-mail.
                        </label>
                    </div>
                </div>

                <!-- Botões de Navegação -->
                <div class="flex justify-between mt-8">
                    <button
                        type="button"
                        id="prev-step-3"
                        class="btn btn-secondary px-8 py-3 text-lg"
                    >
                        <i class="fas fa-arrow-left mr-2"></i>
                        Anterior
                    </button>
                    <button
                        type="submit"
                        id="finalizar-cadastro"
                        class="btn btn-primary px-8 py-3 text-lg flex items-center"
                    >
                        <span id="submit-text">Finalizar Cadastro</span>
                        <i class="fas fa-user-check ml-2" id="submit-icon"></i>
                        <div
                            class="loading-spinner hidden ml-2"
                            id="submit-loading"
                        ></div>
                    </button>
                </div>
            </div>

            <!-- Mensagem de Sucesso -->
            <div class="success-message" id="success-message">
                <div class="flex items-center">
                    <i class="fas fa-check-circle text-2xl mr-3"></i>
                    <div>
                        <h3 class="font-semibold">
                            Cadastro realizado com sucesso!
                        </h3>
                        <p class="text-sm opacity-90">
                            Bem-vindo à família India Oasis. Você receberá um
                            e-mail de confirmação em breve.
                        </p>
                    </div>
                </div>
            </div>
        </form>
    </div>
</main>

<!-- ==== JAVASCRIPT ==== -->
<!-- Scripts migrados para static/js/script.js -->
